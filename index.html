<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>StreamVerse - ÚLTIMA HORA</title>
    
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>

    <style>
        body { margin: 0; font-family: Arial, sans-serif; background: #1a0000; color: white; }
        .breaking-news-banner { background-color: #d00; color: white; padding: 12px 20px; text-align: center; font-size: 1.2rem; font-weight: bold; border-bottom: 4px solid #ffc400; text-transform: uppercase; }
        .main-container { max-width: 1300px; margin: 30px auto; padding: 0 20px; }
        .player-section { background-color: #333; border: 1px solid #555; border-radius: 12px; padding: 25px; margin-bottom: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.5); }
        .player-section h1 { text-align: center; margin-top: 0; color: #ffc400; font-size: 2.2rem; }
        .channel-buttons { display: flex; justify-content: center; flex-wrap: wrap; gap: 15px; margin-bottom: 20px; }
        .channel-buttons button { background-color: #555; color: white; border: 2px solid #777; border-radius: 8px; padding: 10px 20px; font-size: 1rem; font-weight: bold; cursor: pointer; transition: all 0.3s ease; }
        .channel-buttons button:hover { background-color: #ffc400; border-color: #ffc400; color: #1a0000; }
        .channel-buttons button.active { background-color: #ffc400; border-color: #fff; color: #1a0000; box-shadow: 0 0 10px rgba(255,196,0,0.7); }
        #player-container { width: 100%; height: 600px; background-color: black; border-radius: 8px; overflow: hidden; }
        /* Estilos para que Video.js ocupe el 100% del contenedor */
        .video-js { width: 100%; height: 100%; }
        .news-grid-section h2 { text-align: center; font-size: 2.5rem; color: #ffc400; border-bottom: 2px solid #555; padding-bottom: 10px; margin-bottom: 30px; }
        .news-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 25px; }
        .news-card { background-color: #333; border: 1px solid #555; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.4); display: flex; flex-direction: column; }
        .news-card-content { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
        .news-card-content .source { font-size: 0.8rem; color: #aaa; margin-bottom: 5px; text-transform: uppercase; }
        .news-card-content h3 { margin: 0 0 10px 0; font-size: 1.3rem; }
        .news-card-content p { margin: 0 0 20px 0; color: #ddd; flex-grow: 1; }
        .news-card-content a { background-color: #ffc400; color: #1a0000; text-decoration: none; padding: 12px; border-radius: 5px; text-align: center; font-weight: bold; transition: background-color 0.3s; }
        .news-card-content a:hover { background-color: #fff; }
    </style>
</head>
<body>

    <div class="breaking-news-banner">
        ÚLTIMA HORA: EE.UU. ataca sitios nucleares en Irán, según confirma el Presidente Trump
    </div>

    <div class="main-container">
        <section class="player-section">
            <h1>Cobertura en Vivo</h1>
            <div class="channel-buttons">
                <button class="channel-btn" data-player="videojs" data-src="https://iptv-proxystreamverse.fraelvillegasplay9.workers.dev/?url=http://hidra.live:80/live/eufTQNgNXv/ojxBLcjY/319478.m3u8">Fox News</button>
                <button class="channel-btn" data-player="clappr" data-src="https://nbcu-nbcnewyorknews-firetv.amagi.tv/playlist.m3u8">NBC</button>
                <button class="channel-btn" data-player="clappr" data-src="https://nbculocallive.akamaized.net/hls/live/2037499/puertorico/stream1/master.m3u8">Telemundo PR</button>
            </div>
            <div id="player-container"></div>
        </section>

        <section class="news-grid-section">
            <h2>Desarrollo de la Noticia</h2>
            <div class="news-grid">
                <div class="news-card">
                    <div class="news-card-content">
                        <span class="source">Associated Press</span>
                        <h3>EE.UU. ataca 3 sitios nucleares iraníes, uniéndose a la campaña aérea israelí</h3>
                        <p>El Presidente Donald Trump afirmó que el ejército de EE.UU. atacó tres sitios en Irán, incluyendo las instalaciones fortificadas de Fordow, en una arriesgada maniobra para desmantelar el programa nuclear del país.</p>
                        <a href="https://apnews.com/article/israel-iran-war-nuclear-talks-geneva-news-06-21-2025-a7b0cdaba28b5817467ccf712d214579" target="_blank">Leer más</a>
                    </div>
                </div>
                <div class="news-card">
                    <div class="news-card-content">
                        <span class="source">Fox News</span>
                        <h3>Trump anuncia ataque 'muy exitoso' al programa nuclear de Irán</h3>
                        <p>El presidente anunció en redes sociales que se lanzó una "carga completa de BOMBAS" sobre el sitio primario de Fordow y que todos los aviones están regresando a salvo. Declaró que "AHORA ES EL MOMENTO PARA LA PAZ".</p>
                        <a href="https://www.foxnews.com/politics/trump-declares-very-successful-attack-irans-nuclear-program-us-forces-strike-3-key-sites" target="_blank">Leer más</a>
                    </div>
                </div>
                <div class="news-card">
                    <div class="news-card-content">
                        <span class="source">Politico</span>
                        <h3>La intervención directa de EE.UU. sigue a la presión israelí</h3>
                        <p>La decisión de intervenir se produce después de que Israel solicitara a EE.UU. el uso de sus bombas "bunker-buster" GBU-57, capaces de destruir la planta de enriquecimiento de Fordo, enterrada profundamente en una montaña.</p>
                        <a href="https://www.politico.com/news/2025/06/21/us-bombed-3-iranian-nuclear-sites-trump-says-00416403" target="_blank">Leer más</a>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const buttons = document.querySelectorAll('.channel-btn');
            const playerContainer = document.getElementById('player-container');
            let currentPlayer = null; // Variable para guardar la instancia del reproductor actual

            // --- Función principal para cambiar de canal y de reproductor ---
            function switchChannel(playerType, sourceUrl) {
                // 1. Destruir el reproductor anterior si existe
                if (currentPlayer) {
                    // Video.js tiene un método 'dispose', Clappr tiene 'destroy'
                    if (typeof currentPlayer.dispose === 'function') {
                        currentPlayer.dispose();
                    } else if (typeof currentPlayer.destroy === 'function') {
                        currentPlayer.destroy();
                    }
                    currentPlayer = null;
                }
                
                // 2. Limpiar el contenedor
                playerContainer.innerHTML = '';

                // 3. Crear el nuevo reproductor según el tipo
                if (playerType === 'videojs') {
                    // Video.js necesita una estructura de etiquetas <video>
                    const videoElement = document.createElement('video');
                    videoElement.id = 'video-player';
                    videoElement.className = 'video-js vjs-default-skin';
                    videoElement.controls = true;
                    videoElement.preload = 'auto';
                    videoElement.autoplay = true;

                    const sourceElement = document.createElement('source');
                    sourceElement.src = sourceUrl;
                    sourceElement.type = 'application/x-mpegURL';
                    videoElement.appendChild(sourceElement);
                    
                    playerContainer.appendChild(videoElement);
                    
                    // Iniciar Video.js
                    currentPlayer = videojs('video-player', {
                        html5: {
                            vhs: {
                                overrideNative: true
                            }
                        }
                    });

                } else if (playerType === 'clappr') {
                    // Clappr se crea directamente sobre el contenedor
                    currentPlayer = new Clappr.Player({
                        parent: playerContainer,
                        source: sourceUrl,
                        width: '100%',
                        height: '100%',
                        autoPlay: true,
                    });
                }
            }

            // --- Evento para los botones ---
            buttons.forEach(button => {
                button.addEventListener('click', (e) => {
                    // Marcar el botón como activo
                    buttons.forEach(btn => btn.classList.remove('active'));
                    e.currentTarget.classList.add('active');
                    
                    const player = e.currentTarget.dataset.player;
                    const src = e.currentTarget.dataset.src;
                    
                    switchChannel(player, src);
                });
            });

            // --- Cargar el primer canal por defecto al iniciar la página ---
            const firstButton = buttons[0];
            if (firstButton) {
                firstButton.classList.add('active');
                const defaultPlayer = firstButton.dataset.player;
                const defaultSrc = firstButton.dataset.src;
                switchChannel(defaultPlayer, defaultSrc);
            }
        });
    </script>

</body>
</html>
