<!DOCTYPE html>
<html>
<head>
    <title>Reproductores FINAL FIX (REQUIERE CORS)</title>
    <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet" />
    <style>
        body { margin: 20px; font-family: sans-serif; background-color: #f0f0f0; }
        h1 { text-align: center; color: #333; }
        h2 { border-bottom: 2px solid #ccc; padding-bottom: 5px; margin-top: 30px; }
        .player-container { margin: 0 auto 50px; width: 90%; max-width: 800px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .video-js { width: 100% !important; height: 450px; }
        #clappr-player { width: 100%; height: 450px; }
    </style>
</head>
<body>

    <h1>Reproductores Combo - Solución Final</h1>
    
    <div class="player-container">
        <h2>1. Reproductor Video.js</h2>
        <video id="videojs-player" class="video-js vjs-default-skin" controls preload="auto"></video>
    </div>

    <div class="player-container">
        <h2>2. Reproductor Clappr</h2>
        <div id="clappr-player"></div>
    </div>

    <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clappr-hlsjs-playback@latest/dist/clappr-hlsjs-playback.min.js"></script> 

    <script>
        const url_stream = 'https://gg.poocloud.in/nba_charlottehornets/index.m3u8';
        
        const hlsConfig = {
            // Intentamos enviar el Referer, pero solo funcionará si CORS está desactivado
            xhrSetup: function (xhr, url) {
                xhr.setRequestHeader('Referer', 'https://ppv.to/'); 
            }
        };

        // --- INICIALIZACIÓN DE VIDEO.JS ---
        videojs('videojs-player', {
            controls: true,
            preload: 'auto',
            html5: { hls: hlsConfig },
            sources: [{ src: url_stream, type: 'application/x-mpegURL' }]
        });

        // --- INICIALIZACIÓN DE CLAPPR (SOLUCIONADO EL ReferenceError) ---
        // HlsjsPlayback ya está definido aquí gracias al script cargado arriba.
        var clappr_player = new Clappr.Player({
            source: url_stream,
            parentId: '#clappr-player',
            plugins: [HlsjsPlayback], 
            autoPlay: false,
            hlsjsConfig: hlsConfig
        });
    </script>
    
</body>
</html>
