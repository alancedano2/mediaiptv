<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproductor IPTV</title>
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
    
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .player-container {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }

        /* Estilo para el reproductor de Video.js */
        .video-js {
            width: 100% !important;
            height: auto !important;
        }
    </style>
</head>
<body>

<div class="player-container">
    <h1>Mi Reproductor IPTV</h1>
    
    <video
        id="iptv-player"
        class="video-js vjs-default-skin"
        controls
        preload="auto"
        data-setup='{}'
        style="width: 100%; height: auto;"
    ></video>
</div>

<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@1"></script>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        // La URL de tu lista M3U. 
        // ¡Nota importante! El reproductor carga los enlaces de video DIRECTAMENTE de la lista.
        const playlistUrl = 'https://manifest.googlevideo.com/api/manifest/hls_playlist/expire/1769493014/ei/tv13af67A4qoj-8Pw_SR0AU/ip/2607:f00:8:27b7:2906:8be7:8d80:48c5/id/D4LmqPGTNr4.1/itag/301/source/yt_live_broadcast/requiressl/yes/ratebypass/yes/live/1/sgoap/gir=yes;itag=140/sgovp/gir=yes;itag=299/rqh/1/hls_chunk_host/rr3---sn-20xguvgpjvpm-nw0e.googlevideo.com/xpc/EgVo2aDSNQ==/playlist_duration/30/manifest_duration/30/bui/AW-iu_rpT5iGXras34bE5xVj-9R_nssWV-69pZMoOO_I0Em_EQgxydMPXTMM30KMHNqFJ41h90oNZUav/spc/q5xjPFSIFhEpDJNQxScP/vprv/1/playlist_type/DVR/initcwndbps/3296250/met/1769471414,/mh/K9/mm/44/mn/sn-20xguvgpjvpm-nw0e/ms/lva/mv/m/mvi/3/pcm2cms/yes/pl/32/rms/lva,lva/dover/11/pacing/0/keepalive/yes/fexp/51552689,51565115,51565681,51580968/mt/1769471066/sparams/expire,ei,ip,id,itag,source,requiressl,ratebypass,live,sgoap,sgovp,rqh,xpc,playlist_duration,manifest_duration,bui,spc,vprv,playlist_type/sig/AJEij0EwRAIgK_qaUMakKkN4Wt22lIimAW2a-hgSelL32wmg2lyxbP0CIHVxLW2RcKTpOAOn3YVqRG7KoLmxCWVD9Uod78FDaati/lsparams/hls_chunk_host,initcwndbps,met,mh,mm,mn,ms,mv,mvi,pcm2cms,pl,rms/lsig/APaTxxMwRQIhAJPH5CP0Hy5tj_Guh9MDMbC_j75Y7sgW3YrbnpzLDTb_AiBP8hI2dQ2xct4DX-eK1JEJd87yd3pc5kaw5ox-zQMUqQ==/playlist/index.m3u8';
        
        const videoElement = document.getElementById('iptv-player');
        const videoJsPlayer = videojs(videoElement);

        if (Hls.isSupported()) {
            // Hls.js se usa para manejar la reproducción en navegadores que no soportan HLS nativo.
            const hls = new Hls();
            
            // Carga la lista de reproducción
            hls.loadSource(playlistUrl);
            hls.attachMedia(videoElement);
            
            hls.on(Hls.Events.MANIFEST_PARSED, function() {
                // Aquí podrías, por ejemplo, reproducir automáticamente o mostrar información de la lista.
                console.log('Lista M3U cargada y analizada.');
                // Inicia la reproducción (puede fallar si el navegador bloquea el autoplay sin interacción del usuario)
                // videoJsPlayer.play(); 
            });

            // Manejo de errores básicos
            hls.on(Hls.Events.ERROR, function (event, data) {
                console.error("Error en Hls.js:", data);
                if (data.fatal) {
                    switch(data.type) {
                        case Hls.ErrorTypes.NETWORK_ERROR:
                            console.log("Error de red. Intento de recuperación...");
                            hls.recoverMediaError();
                            break;
                        case Hls.ErrorTypes.MEDIA_ERROR:
                            console.log("Error de medios. Intento de recuperación...");
                            hls.recoverMediaError();
                            break;
                        default:
                            hls.destroy();
                            break;
                    }
                }
            });

        } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
            // Compatibilidad para navegadores que soportan HLS nativo (como Safari)
            videoJsPlayer.src({
                src: playlistUrl,
                type: 'application/vnd.apple.mpegurl'
            });
            videoJsPlayer.play();
        } else {
            // Mensaje de error si HLS no es soportado
            videoElement.innerHTML = 'Tu navegador no soporta la reproducción de este tipo de archivo.';
        }
    });
</script>

</body>
</html>
